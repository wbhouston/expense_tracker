doctype html

head
  title = 'Expense Tracker'
  meta name='viewport' content='width=device-width,initial-scale=1'
  = csrf_meta_tags
  = csp_meta_tag

  script src='https://cdn.tailwindcss.com/'

  = stylesheet_link_tag 'application'
  = javascript_importmap_tags

body.h-full
  div class='hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col lg:border-r lg:border-gray-200 lg:pt-5 lg:pb-4'
    div class='flex flex-grow flex-col overflow-y-auto bg-white pt-5 pb-4'
      div class='flex flex-shrink-0 items-center px-4'
        div.h-8
        / h-8 w-auto Logo here

      div class='mt-5 flex flex-grow flex-col'
        nav class='flex-1 space-y-1 bg-white px-2' aria-label='Sidebar'
          div
            = active_link_to(\
              'Transactions',
              transactions_path,
              class: 'text-gray-900 group w-full flex items-center pl-7 pr-2 py-2 text-sm font-medium rounded-md',
              class_active: 'bg-gray-100',
            )

          - accounts_controllers = ['accounts', 'merge_accounts']
          = content_tag(\
            :details,
            aria_controls: 'sub-menu-1',
            aria_expanded: is_active_link?(request.path, [accounts_controllers]),
            class: 'bg-white text-gray-600 group w-full flex items-center',
            open: is_active_link?(request.path, [accounts_controllers]),
          ) do
            summary class='hover:bg-gray-50 hover:text-gray-900 px-2 py-2 text-left text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 before:ml-2' Accounts

            div class='space-y-1 mt-1' id='sub-menu-1'
              = active_link_to(\
                'Chart',
                accounts_path,
                class: 'group flex w-full items-center rounded-md py-2 pl-10 pr-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900',
                class_active: 'bg-gray-100',
              )

              = active_link_to(\
                'Merge Accounts',
                new_merge_account_path,
                class: 'group flex w-full items-center rounded-md py-2 pl-10 pr-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900',
                class_active: 'bg-gray-100',
              )

          - imports_controllers = ['transaction_imports', 'unmatched_transactions', 'merge_transactions']
          = content_tag(\
            :details,
            aria_controls: 'sub-menu-2',
            aria_expanded: is_active_link?(request.path, [imports_controllers]),
            class: 'bg-white text-gray-600 group w-full flex items-center',
            open: is_active_link?(request.path, [imports_controllers]),
          ) do
            summary class='hover:bg-gray-50 hover:text-gray-900 px-2 py-2 text-left text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 before:ml-2' Imports

            div class='space-y-1 mt-1' id='sub-menu-1'
              = active_link_to(\
                'Start Import',
                transaction_imports_path,
                class: 'group flex w-full items-center rounded-md py-2 pl-10 pr-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900',
                class_active: 'bg-gray-100',
              )

              = active_link_to(\
                'Unmatched Transactions',
                edit_unmatched_transaction_path(:all),
                class: 'group flex w-full items-center rounded-md py-2 pl-10 pr-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900',
                class_active: 'bg-gray-100',
              )

              = active_link_to(\
                'Merge Transactions',
                new_merge_transaction_path,
                class: 'group flex w-full items-center rounded-md py-2 pl-10 pr-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900',
                class_active: 'bg-gray-100',
              )

          - reports_controllers = ['reports/profit_and_losses', 'reports/assets']
          = content_tag(\
            :details,
            aria_controls: 'sub-menu-3',
            aria_expanded: is_active_link?(request.path, [reports_controllers]),
            class: 'bg-white text-gray-600 group w-full flex items-center',
            open: is_active_link?(request.path, [reports_controllers]),
          ) do
            summary class='hover:bg-gray-50 hover:text-gray-900 px-2 py-2 text-left text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 before:ml-2' Reports

            div class='space-y-1 mt-1' id='sub-menu-1'
              = active_link_to(\
                'Profits and Losses',
                reports_profit_and_losses_path,
                class: 'group flex w-full items-center rounded-md py-2 pl-10 pr-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900',
                class_active: 'bg-gray-100',
              )

              = active_link_to(\
                'Assets',
                reports_assets_path,
                class: 'group flex w-full items-center rounded-md py-2 pl-10 pr-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900',
                class_active: 'bg-gray-100',
              )

          - sharing_controllers = ['owners']
          = content_tag(\
            :details,
            aria_controls: 'sub-menu-4',
            aria_expanded: is_active_link?(request.path, [sharing_controllers]),
            class: 'bg-white text-gray-600 group w-full flex items-center',
            open: is_active_link?(request.path, [sharing_controllers]),
          ) do
            summary class='hover:bg-gray-50 hover:text-gray-900 px-2 py-2 text-left text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 before:ml-2' Sharing

            div class='space-y-1 mt-1' id='sub-menu-1'
              = active_link_to(\
                'Owners',
                owners_path,
                class: 'group flex w-full items-center rounded-md py-2 pl-10 pr-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900',
                class_active: 'bg-gray-100',
              )

  div class='flex flex-col lg:pl-64'
    = yield
